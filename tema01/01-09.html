<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creación de Estructura en OpenLDAP</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/vs2015.min.css">
</head>

<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">Servicios de Red</div>
            </div>
    </header>

    <div class="container">
        <main class="main-content">
            <div class="content-header">
                <h1 class="content-title">Creación de Estructura Organizativa en LDAP</h1>
            </div>

            <section class="lesson-section">
                <h2 class="section-title">Introducción</h2>
                <p class="text-content">Vamos a crear una estructura dentro de nuestro LDAP. Crearemos varios
                    departamentos (Informática, Contabilidad y Recursos Humanos) con al menos 1 usuario en cada uno.</p>
                <p class="text-content">Lo haremos mediante un archivo LDIF para facilitar el proceso.</p>
            </section>

            <section class="lesson-section">
                <h2 class="section-title">Paso 1: Crear el archivo LDIF</h2>
                <p class="text-content">Ejecutaremos el siguiente comando para crear el archivo de estructura:</p>

                <div class="code-block">
                    <code>sudo nano estructura.ldif</code>
                </div>

                <p class="text-content">Y añadiremos lo siguiente:</p>

                <div class="code-container">
                    <div class="code-header">
                        <span>estructura.ldif</span>
                        <span class="language-badge">texto</span>
                    </div>
                    <div class="code-content">
                        <button class="copy-button">Copiar</button>
                        <pre><code># Unidad Organizativa principal para Departamentos
dn: ou=departamentos,dc=ejemplo,dc=com
objectClass: organizationalUnit
objectClass: top
ou: Departamentos

# Departamento de Informática
dn: ou=Informatica,ou=Departamentos,dc=ejemplo,dc=com
objectClass: organizationalUnit
objectClass: top
ou: Informatica
description: Departamento de Informatica

# Usuarios de Informática
dn: ou=Usuarios,ou=Informatica,ou=Departamentos,dc=ejemplo,dc=com
objectClass: organizationalUnit
objectClass: top
ou: Usuarios

# Usuario de Informática
dn: uid=tecnico1,ou=Usuarios,ou=Informatica,ou=Departamentos,dc=ejemplo,dc=com
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: tecnico1
cn: Tecnico Sistemas
sn: Sistemas
givenName: Tecnico
mail: tecnico1@ejemplo.com
uidNumber: 2001
gidNumber: 2001
homeDirectory: /home/tecnico1
loginShell: /bin/bash
userPassword: {SSHA}SCegANg1AeWNEBen3b5aFmIX2HFssiuJ

# Departamento de Contabilidad
dn: ou=Contabilidad,ou=Departamentos,dc=ejemplo,dc=com
objectClass: organizationalUnit
objectClass: top
ou: Contabilidad
description: Departamento de Contabilidad

# Usuarios de Contabilidad
dn: ou=Usuarios,ou=Contabilidad,ou=Departamentos,dc=ejemplo,dc=com
objectClass: organizationalUnit
objectClass: top
ou: Usuarios

# Usuario de Contabilidad
dn: uid=contador1,ou=Usuarios,ou=Contabilidad,ou=Departamentos,dc=ejemplo,dc=com
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: contador1
cn: Contador Principal
sn: Principal
givenName: Contador
mail: contador1@ejemplo.com
uidNumber: 2002
gidNumber: 2002
homeDirectory: /home/contador1
loginShell: /bin/bash
userPassword: {SSHA}SCegANg1AeWNEBen3b5aFmIX2HFssiuJ

# Departamento de Recursos Humanos
dn: ou=RecursosHumanos,ou=Departamentos,dc=ejemplo,dc=com
objectClass: organizationalUnit
objectClass: top
ou: RecursosHumanos
description: Departamento de Recursos Humanos

# Usuarios de RRHH
dn: ou=Usuarios,ou=RecursosHumanos,ou=Departamentos,dc=ejemplo,dc=com
objectClass: organizationalUnit
objectClass: top
ou: Usuarios

# Usuario de RRHH
dn: uid=rrhh,ou=Usuarios,ou=RecursosHumanos,ou=Departamentos,dc=ejemplo,dc=com
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: rrhh
cn: Recursos Humanos
sn: Humanos
givenName: Recursos
mail: rrhh@ejemplo.com
uidNumber: 2003
gidNumber: 2003
homeDirectory: /home/rrhh
loginShell: /bin/bash
userPassword: {SSHA}QzuDFkzdFz7XuX8saEf12hdM24FjVdRl</code></pre>
                    </div>

                </div>
            </section>

            <section class="lesson-section">
                <h2 class="section-title">Paso 2: Añadir la estructura al directorio LDAP</h2>
                <p class="text-content">Luego añadiremos el archivo ejecutando:</p>

                <div class="code-block">
                    <code>ldapadd -x -D "cn=admin,dc=ejemplo,dc=com" -W -f estructura.ldif</code>
                </div>
            </section>

            <section class="lesson-section">
                <h2 class="section-title">Paso 3: Verificar la estructura creada</h2>
                <p class="text-content">Y comprobaremos el resultado haciendo:</p>

                <div class="code-block">
                    <code>sudo slapcat</code>
                </div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="js/main.js"></script>
</body>

</html>